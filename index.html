<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scale Cafe - Musical Cooking Game</title>
    
    <!-- Preload critical fonts to prevent flash -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body class="cafe-closed">
    <!-- Cafe Header -->
    <header class="cafe-header">
        <div class="cafe-logo">
            <h1>üéµ Scale Cafe</h1>
            <p>Where Music Meets Flavor</p>
        </div>
        <div class="chef-stats">
            <div class="stat">
                <span class="stat-icon">‚≠ê</span>
                <span>XP: <span id="player-xp">0</span></span>
            </div>
            <div class="stat">
                <span class="stat-icon">üí∞</span>
                <span>Coins: <span id="player-coins">0</span></span>
            </div>
        </div>
        <button id="menu-settings-btn" class="settings-btn">üìã Menu</button>
    </header>

    <!-- Order Board (Top) -->
    <section class="order-board">
        <h2 id="refresh-orders">üìã Order Board</h2>
        <div class="order-tickets" id="order-tickets">
            <!-- Order tickets will be generated here -->
        </div>
    </section>

    <!-- Main Cafe Area -->
    <main class="cafe-main">
        <!-- Cooking Station -->
        <section class="cooking-station" id="cooking-station">
            <div class="station-header">
                <h2>üç≥ Cooking Station</h2>
                <div class="current-order" id="current-order">
                    <p>Select an order to start cooking!</p>
                </div>
            </div>

            <!-- Scale Display (Cooking Notes) -->
            <div class="recipe-display" id="recipe-display">
                <h3>üç≥ Cooking Notes</h3>
                <div class="note-sequence" id="note-sequence">
                    <!-- First row (8 notes) -->
                    <div class="note-row">
                        <div class="note-slot" data-index="0"></div>
                        <div class="note-slot" data-index="1"></div>
                        <div class="note-slot" data-index="2"></div>
                        <div class="note-slot" data-index="3"></div>
                        <div class="note-slot" data-index="4"></div>
                        <div class="note-slot" data-index="5"></div>
                        <div class="note-slot" data-index="6"></div>
                        <div class="note-slot" data-index="7"></div>
                    </div>
                    <!-- Second row (for complex orders) -->
                    <div class="note-row complex-row">
                        <div class="note-slot" data-index="8"></div>
                        <div class="note-slot" data-index="9"></div>
                        <div class="note-slot" data-index="10"></div>
                        <div class="note-slot" data-index="11"></div>
                        <div class="note-slot" data-index="12"></div>
                        <div class="note-slot" data-index="13"></div>
                        <div class="note-slot" data-index="14"></div>
                        <div class="note-slot" data-index="15"></div>
                    </div>
                    <!-- Third row (for gourmet orders) -->
                    <div class="note-row gourmet-row">
                        <div class="note-slot" data-index="16"></div>
                        <div class="note-slot" data-index="17"></div>
                        <div class="note-slot" data-index="18"></div>
                        <div class="note-slot" data-index="19"></div>
                        <div class="note-slot" data-index="20"></div>
                        <div class="note-slot" data-index="21"></div>
                        <div class="note-slot" data-index="22"></div>
                        <div class="note-slot" data-index="23"></div>
                    </div>
                </div>
            </div>

            <!-- Cooking Progress -->
            <div class="cooking-progress" id="cooking-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <p class="cooking-status" id="cooking-status">Ready to cook!</p>
            </div>
        </section>
    </main>

    <!-- Menu Settings Panel -->
    <div id="menu-panel" class="menu-panel">
        <div class="menu-content">
            <h2>üçΩÔ∏è Cafe Menu Settings</h2>
            
            <div class="menu-section">
                <h3>Available Dishes</h3>
                <div class="dish-options">
                    <div class="dish-option selected" data-scale="major">
                        <div class="dish-icon">‚òï</div>
                        <h4>Coffee Menu</h4>
                        <p>Major Scales</p>
                    </div>
                    <div class="dish-option selected" data-scale="harmonicMinor">
                        <div class="dish-icon">ü•ê</div>
                        <h4>Bakery Menu</h4>
                        <p>Harmonic Minor Scales</p>
                    </div>
                    <div class="dish-option" data-scale="melodicMinor">
                        <div class="dish-icon">üçø</div>
                        <h4>Snacks Menu</h4>
                        <p>Melodic Minor Scales</p>
                    </div>
                </div>
            </div>

            <div class="menu-section">
                <h3>Order Complexity</h3>
                <div class="complexity-buttons">
                    <button class="complexity-btn" data-difficulty="normal">
                        <span class="complexity-icon">üçΩÔ∏è</span>
                        <span>Simple</span>
                    </button>
                    <button class="complexity-btn selected" data-difficulty="elite">
                        <span class="complexity-icon">üçΩÔ∏èüçΩÔ∏è</span>
                        <span>Complex</span>
                    </button>
                    <button class="complexity-btn" data-difficulty="boss">
                        <span class="complexity-icon">üçΩÔ∏èüçΩÔ∏èüçΩÔ∏è</span>
                        <span>Gourmet</span>
                    </button>
                </div>
                <div class="complexity-info">
                    <p id="complexity-description">Complex: Two dishes with voice leading (16 notes)</p>
                </div>
            </div>



            <div class="menu-controls">
                <button id="apply-menu-btn" class="apply-btn">Apply Settings</button>
                <button id="close-menu-btn" class="close-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- Order Complete Modal -->
    <div id="order-complete-modal" class="modal hidden">
        <div class="modal-content">
            <h2>üéâ Order Complete!</h2>
            <div class="completion-message" id="completion-message">
                <p>Delicious! The customer loved it!</p>
            </div>
            <div class="rewards">
                <div class="reward">
                    <span class="reward-icon">‚≠ê</span>
                    <span>XP: <span id="xp-reward">100</span></span>
                </div>
                <div class="reward">
                    <span class="reward-icon">üíµ</span>
                    <span>Sell: $<span id="sell-reward">0.00</span></span>
                </div>
                <div class="reward">
                    <span class="reward-icon">üí∞</span>
                    <span>Tips: $<span id="tip-reward">0.00</span></span>
                </div>
            </div>
            <button id="continue-cooking-btn" class="continue-btn">Continue Cooking</button>
        </div>
    </div>

    <!-- MIDI Status -->
    <div class="midi-status" id="midi-status">
        <span>üéπ Piano: </span>
        <span id="midi-connection-status" class="midi-light clickable">‚óè</span>
        <span style="margin-left: 1rem;">üîä Sound: </span>
        <span id="sound-toggle" class="midi-light clickable" style="color: #32CD32;">‚óè</span>
    </div>

    <!-- Load all scripts -->
    <script src="js/webmidi.min.js"></script>
    <script src="js/scale-engine.js"></script>
    <script src="js/sound-manager.js"></script>
    <script src="js/midi-handler.js"></script>
    <script src="js/cafe-system.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
